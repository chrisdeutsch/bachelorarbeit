%==============================================================================
\chapter{Aufbau und Methodik}
\label{sec:aufbau_und_methodik}
%==============================================================================

%------------------------------------------------------------------------------
\section{Der PETRA-Resonator}
%------------------------------------------------------------------------------
\begin{figure}[htb]
  \centering
  \includegraphics[width=0.8\textwidth]{./figs/cavity/cavity.pdf}
  \caption[Schematische Darstellung des Querschnitts eines siebenzelligen PETRA-Resonators mit Koppelschleife und zwei Abstimmstempeln]{Schematischer Darstellung des Querschnitts eines siebenzelligen PETRA-Resonators mit Koppelschleife und zwei Abstimmstempeln. Der Abstand zwei benachbarter Zellenmitten beträgt \SI{30}{\centi\metre} und die Gesamtlänge des Resonators \SI{222}{\centi\metre}.}
  \label{fig:petra_cavity}
\end{figure}
Im Rahmen dieser Arbeit wird das elektrische Feld von zwei siebenzelligen Beschleunigungsresonatoren vom Typ PETRA \cite{desy_petra} vermessen, welche in Kooperation von DESY und Balzers Hochvakuum GmbH (1982/83) hergestellt wurden.
Der Resonator ist ausgelegt auf die Beschleunigung von ultrarelativistischen Elektronen und Positronen durch die $\mathrm{TM}_{010}$-Mode bei einer Frequenz von \SI{499.67}{MHz}.
Der Querschnitt dieser Kavität ist in Abbildung \ref{fig:petra_cavity} schematisch dargestellt.
Die Zellen werden durch leitende Kupferwände voneinander getrennt, die eine Verbreiterung an der Strahlachse des Resonators aufweisen.
Diese sogenannten \textit{Nose Cones} erzeugen eine Erhöhung der elektrischen Feldstärke in der Zelle bei gleichzeitiger Verkürzung der Beschleunigungsstrecke und führt zu einem Anstieg des Laufzeitfaktors \eqref{eq:laufzeitfaktor} gegenüber einer Kavität ohne Nose Cones \cite[S.\ 48]{wangler}.

Jede der Zellen des PETRA-Resonators stellt einen Hohlraumresonator dar, der durch vier Koppelschlitze in der trennenden Kupferwand an die jeweiligen Nachbarzellen gekoppelt ist.
Dies führt zur Aufspaltung jeder Mode der Einzelzelle in $N$ Moden der Resonatorkette\footnote{Dies ist analog zu gekoppelten mechanischen Pendeln, welche ebenfalls verschiedene Schwingungsmoden aufweisen.}, wobei $N = 7$ die Anzahl der gekoppelten Zellen ist.
Die $N$ Moden der Resonatorkette unterscheiden sich neben der Resonanzfrequenz $\omega_0$ auch in der Phasendifferenz des Feldes zwei benachbarter Zellen  $\Delta \varphi$.
Die Benennung der Moden einer Resonatorkette erfolgt anhand dieses Phasenvorschubs pro Zelle~$\Delta \varphi$ (z.\ B.\ $\pi$-Mode für $\Delta \varphi = \pi$).
Für eine Resonatorkette aus $N$ gekoppelten Resonatoren sind Moden mit dem Phasenvorschub
\begin{align}
	\Delta \varphi = q \cdot \frac{\pi}{N-1} \qquad \text{mit} \qquad q = 0, 1, \dots, N-1
\end{align}
möglich \cite[S.\ 110]{wangler}.
Es folgen die Moden der siebenzelligen Resonatorkette:
\begin{align}
  \Delta \varphi = 0,\, \frac{1}{6} \pi,\, \frac{1}{3} \pi,\, \frac{1}{2} \pi,\, \frac{2}{3} \pi,\, \frac{5}{6} \pi,\, \pi \eqdot
\end{align}

In der mittleren Zelle des PETRA-Resonators befindet sich die Koppelschleife \cite{desy_schleife}, deren Geometrie auf den Resonator angepasst ist um eine kritische Kopplung an die $\mathrm{TM}_{010}$-Beschleuniger\-mode zu ermöglichen.
Eine Anpassung des Koppelfaktors kann durch Drehen der Schleife erreicht werden, da dies die effektive Fläche der Leiterschleife senkrecht zum Magnetfeld der betrachteten Resonatormode verändert.
In den Zellen~2 und 6 sind Abstimmstempel \cite{desy_stempel} angebracht die durch Schrittmotoren in bzw.\ aus der Kavität gefahren werden können.
Das Verstellen der Stempel führt zu einer Änderung der Geometrie des Resonators und folglich zu einer Verschiebung der Resonanzfrequenz.
Dies kann zum Stimmen der Resonanzfrequenz einer Mode in einem beschränkten Frequenzbereich genutzt werden.
Die zwei weiteren Vakuumflansche in den Zellen~1 und 7 dienen dem Anschluss von Vakuumpumpen.

Die in dieser Arbeit vermessenen Resonatoren seien im Folgenden mit PETRA-III und -IV bezeichnet\footnote{Die fünfzelligen Resonatoren PETRA-I und -II sind im Stretcherring von ELSA verbaut.}.
\todo{Die Kavität PETRA-IV wurde, in einer von dieser Arbeit unabhängigen Tätigkeit, durch eine Gasentladung gereinigt.}


%------------------------------------------------------------------------------
\section{Aufbau des Störkörpermessstandes}
%------------------------------------------------------------------------------
\begin{sidewaysfigure}[p]
	\centering
	\includegraphics[width=1.0\textheight]{./figs/cavity/messaufbau.pdf}
	\caption[Schematischer Aufbau des Störkörpermessstandes]{Schematischer Aufbau des Störkörpermessstandes für einen siebenzelligen PETRA-Resonator mit Abstimmstemplen und Einkoppelschleife (a), Montageträger (b), Gestell aus einem Aluminiumprofilsystem (c), Kreuzblenden (d), Polytetrafluorethylen-Störkörper (e), Spindel mit Schrittmotor (f) und Zugfeder (g).}
	\label{fig:stoerkoerpermessstand}
\end{sidewaysfigure}
Zur Bestimmung des elektrischen Feldes auf der Strahlachse des Resonators wird die in Abschnitt \ref{sec:resonante_stoerkoerpermessung} eingeführte resonante Störkörpermessung genutzt.
Dazu wird ein kugelförmiger Störkörper aus Polytetrafluorethylen (PTFE) mit einem Durchmesser $D = \SI{20.05 +- 0.02}{mm}$ verwendet, welcher durch eine zentrische Bohrung $d = \SI{1.3 +- 0.05}{mm}$ auf einem Kunststofffaden befestigt werden kann.

Um den Störkörper auf der Strahlachse durch den Resonator bewegen zu können, wurde der Störkörpermessstand aus Abbildung \ref{fig:stoerkoerpermessstand} aufgebaut.
Über ein Gestell aus einem Aluminiumprofilsystem und einem System von Umlenkrollen, welche fest mit dem siebenzelligen PETRA-Resonator verbunden sind, kann ein Kunststofffaden, an dem der Störkörper befestigt ist, durch den Resonator gespannt werden.
Dieser Faden wird dann beidseitig fest mit einer Spindel verbunden, die wiederum auf der Welle eines Schrittmotors befestigt ist.
Die Rückführung des Fadens auf die Spindel führt dazu, dass unabhängig von der Spannung des Fadens das Drehmoment auf der Welle des Schrittmotors kompensiert wird.
Dadurch kann der Faden so stark gespannt werden, dass das Durchhängen des Störkörpers am Faden vernachlässigt werden kann, ohne dabei einen Schrittverlust durch ein überlastendes Drehmoment am Motor zu riskieren.
Darüber hinaus verhindert die feste Verbindung des Fadens mit der Spindel ein longitudinales Verrutschen des Fadens in seiner Führung, was insbesondere für eine präzise Ortsbestimmung des Störkörpers wichtig ist.
Zusätzlich wurde an den Vakuumflanschen des Resonators Kreuzblenden installiert um einerseits ein Eindringen von Staub zu vermindern. Andererseits dient die Blende als Referenzpunkt zur Zentrierung des Störkörpers auf der Strahlachse.

Durch das Auf- beziehungsweise Abrollen des Fadens auf der Spindel, kann der Störkörper entlang der Strahlachse verschoben werden.
Die Drehung der Spindel erfolgt dabei durch den 2-Phasen Schrittmotor \textit{MDrive\textsuperscript{\textregistered} 23 Plus Motion Control} des Herstellers \textit{Schneider Electric} \cite{motor_datasheet}.
Der Motor besitzt eine integrierte Steuereinheit, welche die direkte Ansteuerung über eine serielle Schnittstelle ermöglicht.
Ein voller Schritt des Motors entspricht einem Drehwinkel der Welle von \SI{1.8}{\degree} oder \num{200} Schritten pro Umdrehung.
Durch eine spezielle Ansteuerungstechnik, welche in der Steuereinheit implementiert wurde, wird ein Schritt zusätzlich in \num{256} sogenannte \textit{Microsteps} eingeteilt.
Die Ortsinformation des Störkörpers entlang der Strahlachse kann dann aus der Anzahl der erfolgten Microsteps gewonnen werden.
Aus der Geometrie der Spindel folgt für die zugehörige Proportionalitätskonstante ca.\ \SI{0.006}{\milli\metre\per\micro\step}.
Die Stellgenauigkeit von Schrittmotoren liegt typischerweise bei \SI{5}{\percent} eines vollen Schrittes \cite{gecko}, was einem Winkelfehler von \SI{0.09}{\degree} oder einem Fehler in der Störkörperposition von weniger als \SI{0.1}{\milli\metre} entspricht.
Der limitierende Faktor für die Genauigkeit der Störkörperpositon liegt demnach nicht in der Stellgenaugikeit des Motors, sondern in der ungleichen mechanischen Verspannung des Kunststofffadens aufgrund von Reibung in den Lagern der Umlenkrollen.
Mit dem verwendeten Messaufbau können so Fehler der Positionsbestimmung von unter \SI{0.5}{mm} erreicht werden, was eine ausreichende Genaugikeit für die Vermessung der Resonatoren darstellt.

Zur Bestimmung der Resonanzfrequenz und Güte einer Resonatormode dient der vektorielle Netzwerkanalysator \textit{ZVC 1127.8600.62} von \textit{Rohde \& Schwarz}.
Dieser wird über ein \SI{50}{\ohm}-Koaxialkabel (RG~214/U) mit der Koppelschleife verbunden, wobei die Verbindung durch einen Spezialadapter vom Typ-N Stecker des Kabels auf die $6\tfrac{1}{8}$-Zoll \SI{50}{\ohm}-Koaxialverbindung der Koppelschleife erfolgt.
Im Allgemeinen dienen Netzwerkanalysatoren der Messung von Reflexion und Transmission eines Signals variabler Frequenz an elektrischen Netzwerken.
Für die resonante Störkörpermessung, wie sie in dieser Arbeit durchgeführt wird, ist vorallem die Messung des Reflexionsfaktors~$\rho$ interessant, weshalb sich die folgende Beschreibung auf die Reflexionsmessung konzentriert.
Der Signalgenerator im VNA erzeugt ein sinusförmiges Signal mit variabler Frequenz und konstanter Leistung (\SI{6}{dBm}), welches über einen Richtkoppler auf die angeschlossene Messleitung übertragen werden kann.
Trifft das Signal auf die Koppelschleife, so wird es dort teilweise reflektiert und erreicht über die Messleitung erneut den Netzwerkanalysator.
Durch den Richtkoppler wird nun das reflektierte vom auslaufenden Signal getrennt, was eine Bestimmung des komplexen Reflexionsfaktors~$\rho$ durch einen Vergleich von Phase und Leistung beider Signale erlaubt.
Um ein von der Dämpfung und Laufzeit im Koaxialkabel unabhängiges Ergebnis zu erhalten, kann eine Kalibration durchgeführt werden, indem das Ende der Messleitung durch einen offenen, kurzgeschlossenen und angepassten \SI{50}{\ohm}-Abschluss terminiert wird.
Dies ermöglicht die Berechnung eines Korrekturfaktors für den Reflexionskoeffizienten und kann automatisiert über die Software des VNA durchgeführt werden.
Durch eine Variation der Signalfrequenz in einem sog.\ \textit{Sweep} kann das Reflexionsspektrum~$\rho(\nu)$ in einem begrenzten Frequenzbereich gemessen werden.
Der verwendete VNA ermöglicht die Messung des Reflexionsspektrums durch bis zu 2001 gleichverteilte Messpunkte auf dem vorgegebenen Frequenzintervall.
Außerdem ist es möglich einen laufenden Mittelwert des Spektrums über eine beliebige Anzahl von Sweeps zu bilden und auf den gemessenen Spektren typische mathematische Operationen, wie beispielsweise die Suche des Minimums der Reflexion $|\rho|$, durchzuführen.
Die Ein- und Ausgabe kann auch hier über eine serielle Schnittstelle erfolgen.

Zur Realisierung einer automatisierten Störkörpermessung und der Koordination von Schrittmotor und Netzwerkanalysator dient der Mikrocomputer \textit{Raspberry Pi} (RPi), der mit den Komponenten des Messaufbaus über serielle Schnittstellen kommunizieren kann.
In der Programmiersprache \textit{Python} wurde dazu die serielle Kommunikation mit Motor und VNA, sowie die Steuerung des Messablaufs implementiert.
Der genaue Ablauf einer Störkörpermessung wird im nächsten Abschnitt erläutert.


%------------------------------------------------------------------------------
\section{Messmethodik}
%------------------------------------------------------------------------------

%------------------------------------------------------------------------------
\subsection{Temperaturabhängigkeit der Resonanzfrequenz}
\label{sec:temperaturabh_resonanzfrequenz}
%------------------------------------------------------------------------------
Für die resonante Störkörpermessung gilt es die Verschiebung der Resonanzfrequenz $\Delta \nu$ durch den Störkörper an verschiedenen Positionen im Resonator zu messen.
Dabei muss man beachten, dass es neben der Frequenzverschiebung durch den Störkörper auch zu einer Verstimmung aufgrund von Temperaturänderungen des Resonators kommt.
Eine Erwärmung führt beispielsweise zu einer thermischen Ausdehnung des Resonators und folglich zu einer Vergrößerung des Hohlraumvolumens.
Diese Geometrieänderung des Hohlraums führt zu einer Reduzierung der Resonanzfrequenz der Resonatormoden.
Analog führt ein Abkühlen des Resonators zur Kontraktion desselben, die wiederum eine Erhöhung der Resonanzfrequenz zur Folge hat. Für die vermessenen PETRA-Resonatoren liegt die Verstimmung durch Temperaturänderung bei ungefähr \SI{8}{\kilo\hertz\per\celsius} \cite{desy_petra} und liegt in der gleichen Größenordnung wie die Verschiebung durch den verwendeten Störkörper.
Aus diesem Grund muss die Temperaturabhängigkeit der Resonanzfrequenz beachtet werden.

Sei dazu durch $\nu_0(z)$ die Resonanzfrequenz einer Resonatormode, mit dem Störkörper auf der Position~$z$ entlang der Strahlenachse, gegeben.
Außerdem sei eine Referenzposition des Störkörpers~$z_\mathrm{ref}$ mit zugehöriger Resonanzfrequenz~$\nu_\mathrm{ref} = \nu_0(z_\mathrm{ref})$ definiert.
Die somit eingeführten Größen~$\nu_0(z)$ und~$\nu_\mathrm{ref}$ sind jeweils temperaturabhängig.
Wird jedoch die Differenz~$\nu_0(z) - \nu_\mathrm{ref}$ betrachtet, so stellt man fest, dass diese, im Hinblick auf typische Temperaturänderungen während einer Messung, konstant ist \cite{schedler_pm}.
Da die Messung an beiden Positionen nicht instantan erfolgen kann, muss als Anforderung gestellt werden, dass die Temperaturänderung über diesem Zeitraum vernachlässigbar ist.
Um dies zu gewährleisten wurden die Messungen hauptsächlich über Nacht durchgeführt.
Es ist praktisch die Referenzposition des Störkörpers so zu wählen, dass die Frequenz~$\nu_\mathrm{ref}$ der Resonanzfrequenz des ungestörten Resonators entspricht.
Dies ist der Fall, wenn am Ort des Störkörpers das elektrische Feld verschwindet, wie beispielsweise unmittelbar vor der Kreuzblende am Vakuumflansch des Resonators (vgl.\ Abb.\ \ref{fig:stoerkoerpermessstand}).
Dadurch entspricht die temperaturunabhängige Frequenzdifferenz der Verschiebung der Resonanzfrequenz~$\Delta \nu$ des gestörten vom ungestörten Resonator.


%------------------------------------------------------------------------------
\subsection{Ablauf der Störkörpermessung}
%------------------------------------------------------------------------------
In diesem Abschnitt soll der Ablauf einer Störkörpermessung dargestellt werden.
Zunächst wird der Frequenzbereich des VNA um eine Resonanz der ungestörten Kavität zentriert und eine Kalibration durchgeführt.
Anschließend wird das Reflexionsspektrum $\rho(\nu)$ des Resonators vermessen, was der späteren Bestimmung von Resonanzfrequenz und Güte dient.
Danach wird der Störkörper in den Resonator gefahren und seine Nullstellung festgelegt.
Nun muss der Frequenzbereich des VNA so eingestellt werden, dass die Resonanzkurve (vgl.\ Abb.\ ???) der zu vermessenden Resonatormode stets in den Messbereich des VNA fällt.
Dabei ist insbesondere die pertubative Verstimmung durch den Störkörper, aber auch die thermische Verstimmung zu beachten.
Nachdem der Frequenzbereich für die Messung gefunden wurde, muss der Netzwerkanalysator auf diesem erneut kalibriert werden.
Die automatisierte Messung kann dann mit dem im Rahmen dieser Arbeit entwickelten Störkörpermessprogramm erfolgen.

Das Programm misst dabei die Verschiebung der Resonanzfrequenz durch den Störkörper an verschiedenen Stellen im Resonator, indem die in Abschnitt \ref{sec:temperaturabh_resonanzfrequenz} zur temperaturunabhängigen Messung eingeführte Methode ausgenutzt wird.
Die konkreten Schritte die durch das Programm durchgeführt werden, sollen hier knapp umrissen werden.
Zur Bestimmung der Frequenzverschiebung an einer Position~$z$ wird der Störkörper auf die Referenzposition~$z_\mathrm{ref}$ gefahren, an der zunächst eine kurze Einschwingzeit (\SI{5}{s}) des Störkörpers gewartet wird.
Anschließend wird mit dem VNA der Mittelwert des Reflexionsspektrums von fünf Messzyklen berechnet.
Schließlich kann die Resonanzfrequenz~$\nu_\mathrm{ref}$ durch die Funktion des VNAs der Minimumssuche bestimmt werden.
Danach wird der Störkörper auf die Position~$z$ gefahren, um dort analog die Resonanzfrequenz~$\nu$ zu bestimmen.
Die Größen $z, \nu, \nu_\mathrm{ref}$ und $\nu - \nu_\mathrm{ref}$ werden dann auf dem Flash-Speicher des RPi gespeichert.
Dieser Messschritt wird solange wiederholt, bis der Resonator auf der gesamten Länge in einer frei wählbaren Schrittweite vermessen wurde.


Leitfähigkeitänderung $Q$

Fit der Resonanzkurve an die Güte\\
Resonanzfrequenz aus dem Minimum der Resonanzkurve\\
Längenmessung\\
Checkmode\\
Einschwingzeit
